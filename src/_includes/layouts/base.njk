<!doctype html>
<html lang="fr" class="{% if theme == 'dark' %}dark{% endif %}">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{% if title %}{{ title }}{% else %}TOLExperience{% endif %}</title>

<style>
/* === Polices TOL === */
@font-face{font-family:"TOLArial3"; src:url("/fonts/TOL-Arial3Gras-SVG.otf") format("opentype"); font-weight:700; font-style:normal; font-display:swap;}
@font-face{font-family:"TOLArial2"; src:url("/fonts/TOL-Arial2Gras-SVG.otf") format("opentype"); font-weight:400; font-style:normal; font-display:swap;}
@font-face{font-family:"TOLArial4"; src:url("/fonts/TOL-Arial4Light.otf")    format("opentype"); font-weight:300; font-style:normal; font-display:swap;}
@font-face{font-family:"TOL-RV1";   src:url("/fonts/TOLRV1.ttf")             format("truetype"); font-weight:400; font-style:normal; font-display:swap;}

/* === Couleurs marque + variables === */
:root{
  --brand-blue:#005e83;
  --brand-red:#a63d2f;
  --grey-dark:#383e42;
  --grey-light:#c8c8c7;

  --bg:var(--grey-light);
  --text:var(--grey-dark);
  --stroke:var(--grey-dark);

  --frame-gap: clamp(12px, 1.2vw + 8px, 1cm);
  --border-w:3px;
  --line-thin:1px;
  --line-center:2px;

  --tick-base:7mm;
  --tick-mid-base:9mm;
  --tick-l:     min(var(--tick-base),     var(--frame-gap));
  --tick-l-mid: min(var(--tick-mid-base), calc(var(--frame-gap) + 10px));

  --logo-target: 34px;
  --logo-bottom-offset: 2px;
  --logo-clear-frame: 2px;

  --content-pad: clamp(10px, 2vw, 24px);
  --btn-gap: clamp(4px, 0.8vw, 12px);
}

/* Thème sombre */
html.dark{
  --bg:#0e1012;
  --text:var(--grey-light);
  --stroke:var(--grey-light);
}

/* Base */
html,body{height:100%; margin:0; -webkit-text-size-adjust:100%;}
body{
  background:var(--bg);
  color:var(--text);
  font-family:"TOLArial4", Arial, Helvetica, sans-serif;
  font-size:12px;
  line-height:1.45;
  padding: calc(var(--frame-gap) + var(--content-pad)) var(--frame-gap);
}

/* Liens */
a,a:link,a:visited,a:active,a:hover,
a[href^="mailto:"],a[href^="tel:"],a[x-apple-data-detectors]{
  color:var(--brand-blue) !important;
  -webkit-text-fill-color:var(--brand-blue) !important;
  text-decoration:underline;
}

/* Typo */
h1,h2,h3,.tol-title{
  font-family:"TOLArial3", Arial, Helvetica, sans-serif;
  font-size:16px; font-weight:700; color:var(--brand-blue);
  margin:0 0 8px 0;
}
.L{ color:var(--brand-red) !important; -webkit-text-fill-color:var(--brand-red) !important; }

h4,.tol-subtitle{
  font-family:"TOLArial2", Arial, Helvetica, sans-serif;
  font-size:14px; color:var(--grey-dark); margin:8px 0 6px 0;
}
html.dark h4, html.dark .tol-subtitle{ color:var(--grey-light); }

p,li,td,th,.tol-text{
  font-family:"TOLArial4", Arial, Helvetica, sans-serif;
  font-size:12px; color:var(--grey-dark);
}
html.dark p, html.dark li, html.dark td, html.dark th, html.dark .tol-text{ color:var(--grey-light); }

.tol-note{
  font-family:"TOL-RV1","Comic Sans MS","Segoe Script",cursive;
  font-size:12px; color:var(--text);
}
.tol-note.red{
  color:var(--brand-red);
  font-weight:700;
  text-decoration: underline dotted var(--stroke);
  text-decoration-thickness: 3px;
  text-underline-offset: 2px;
}

/* Zone de contenu */
.container{
  max-width: min(1100px, 100%);
  margin: 0 auto;
  background: var(--bg);
  padding: var(--content-pad);
  border-radius: 0;
  box-shadow: none;
}

/* Cadre global */
.page-frame{position:fixed; inset:var(--frame-gap); pointer-events:none; z-index:999;}
.page-frame::before{content:""; position:absolute; inset:0; border:var(--border-w) solid var(--stroke); border-radius:2px}

/* Ticks */
.tick-top, .tick-bottom, .tick-left, .tick-right{position:absolute;}
.tick-top{left:0; right:0; height:var(--frame-gap); top:calc(-1*var(--frame-gap))}
.tick-top::before{
  content:""; position:absolute; left:0; right:0; top:0; height:var(--tick-l);
  background:
    linear-gradient(var(--stroke),var(--stroke)) 25% 0/var(--line-thin) 100% no-repeat,
    linear-gradient(var(--stroke),var(--stroke)) 75% 0/var(--line-thin) 100% no-repeat;
}
.tick-top::after{
  content:""; position:absolute; left:50%; transform:translateX(-50%); top:0;
  width:var(--line-center); height:var(--tick-l-mid); background:var(--stroke);
}

.tick-bottom{left:0; right:0; height:var(--frame-gap); bottom:calc(-1*var(--frame-gap))}
.tick-bottom::before{
  content:""; position:absolute; left:0; right:0; bottom:0; height:var(--tick-l);
  background:
    linear-gradient(var(--stroke),var(--stroke)) 25% 0/var(--line-thin) 100% no-repeat,
    linear-gradient(var(--stroke),var(--stroke)) 75% 0/var(--line-thin) 100% no-repeat;
}
.tick-bottom::after{
  content:""; position:absolute; left:50%; transform:translateX(-50%); bottom:0;
  width:var(--line-center); height:var(--tick-l-mid); background:var(--stroke);
}

.tick-left{top:0; bottom:0; width:var(--frame-gap); left:calc(-1*var(--frame-gap))}
.tick-left::before{
  content:""; position:absolute; top:0; bottom:0; left:0; width:var(--tick-l);
  background:
    linear-gradient(90deg,var(--stroke),var(--stroke)) 0 25%/100% var(--line-thin) no-repeat,
    linear-gradient(90deg,var(--stroke),var(--stroke)) 0 75%/100% var(--line-thin) no-repeat;
}
.tick-left::after{
  content:""; position:absolute; top:50%; transform:translateY(-50%); left:0;
  height:var(--line-center); width:var(--tick-l-mid); background:var(--stroke);
}

.tick-right{top:0; bottom:0; width:var(--frame-gap); right:calc(-1*var(--frame-gap))}
.tick-right::before{
  content:""; position:absolute; top:0; bottom:0; right:0; width:var(--tick-l);
  background:
    linear-gradient(90deg,var(--stroke),var(--stroke)) 0 25%/100% var(--line-thin) no-repeat,
    linear-gradient(90deg,var(--stroke),var(--stroke)) 0 75%/100% var(--line-thin) no-repeat;
}
.tick-right::after{
  content:""; position:absolute; top:50%; transform:translateY(-50%); right:0;
  height:var(--line-center); width:var(--tick-l-mid); background:var(--stroke);
}

/* Logo bas-droite */
.frame-logo{
  position:fixed;
  right:var(--frame-gap);
  bottom:var(--logo-bottom-offset);
  height:min(var(--logo-target), calc(var(--frame-gap) - var(--logo-bottom-offset) - var(--logo-clear-frame)));
  width:auto; object-fit:contain; opacity:.95;
  z-index:1000; pointer-events:none;
}

/* === Barre de contrôle === */
.controls{
  position: fixed;
  top: 0; left: 0; right: 0;
  height: var(--frame-gap);
  pointer-events: none;
  z-index: 1100;
}
.controls button{
  position: absolute;
  top: 0; bottom: 0;
  margin: auto 0;
  height: calc(var(--frame-gap) - 4px);
  line-height: calc(var(--frame-gap) - 4px);
  padding: 0 clamp(6px, 1.2vw, 14px);
  background: transparent;
  border: 0;
  color: var(--stroke);
  font-family: "TOLArial2", Arial, Helvetica, sans-serif;
  font-weight: 700;
  font-size: clamp(12px, calc(var(--frame-gap)*0.45), 20px);
  white-space: nowrap;
  pointer-events: auto;
  cursor: pointer;
}
.btn-back  { right: calc(50% + var(--btn-gap)); }
.btn-home  { left:  calc(50% + var(--btn-gap)); }
.btn-theme { right: var(--frame-gap); }
</style>
</head>
<body>

<!-- Boutons -->
<div class="controls">
  <button class="btn-back" onclick="history.back()">Retour</button>
  <button class="btn-home" onclick="location.href='/'">Accueil</button>
  <button class="btn-theme" onclick="toggleTheme()">Thème</button>
</div>

<!-- Cadre + ticks -->
<div class="page-frame" aria-hidden="true">
  <div class="tick-top"></div>
  <div class="tick-bottom"></div>
  <div class="tick-left"></div>
  <div class="tick-right"></div>
</div>

<!-- Logo -->
<img class="frame-logo" src="/logo0.webp" alt="">

<!-- Contenu -->
<main class="container">
{% block content %}{% endblock %}
</main>

<script>
function toggleTheme(){
  document.documentElement.classList.toggle('dark');
  localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
}
(function(){
  if(localStorage.getItem('theme') === 'dark'){
    document.documentElement.classList.add('dark');
  }
})();
</script>

</body>
</html>

